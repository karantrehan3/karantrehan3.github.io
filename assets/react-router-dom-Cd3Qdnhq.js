import{r as n,R as H}from"./react-BWtM72Fx.js";import{a as N}from"./react-dom-ENHEuykK.js";import{m as k,l as A,D as B,a as W,R as Y,u as q}from"./react-router-CqKF-udQ.js";import{c as G,b as J,E as K}from"./@remix-run-CGYEatoU.js";/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E(){return E=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},E.apply(this,arguments)}const Q="6";try{window.__reactRouterVersion=Q}catch{}function fe(t,i){return G({basename:void 0,future:E({},void 0,{v7_prependBasename:!0}),history:J({window:void 0}),hydrationData:X(),routes:t,mapRouteProperties:k,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function X(){var t;let i=(t=window)==null?void 0:t.__staticRouterHydrationData;return i&&i.errors&&(i=E({},i,{errors:Z(i.errors)})),i}function Z(t){if(!t)return null;let i=Object.entries(t),e={};for(let[s,r]of i)if(r&&r.__type==="RouteErrorResponse")e[s]=new K(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let u=window[r.__subType];if(typeof u=="function")try{let l=new u(r.message);l.stack="",e[s]=l}catch{}}if(e[s]==null){let u=new Error(r.message);u.stack="",e[s]=u}}else e[s]=r;return e}const $=n.createContext({isTransitioning:!1}),ee=n.createContext(new Map),te="startTransition",O=H[te],ne="flushSync",V=N[ne];function re(t){O?O(t):t()}function S(t){V?V(t):t()}class ie{constructor(){this.status="pending",this.promise=new Promise((i,e)=>{this.resolve=s=>{this.status==="pending"&&(this.status="resolved",i(s))},this.reject=s=>{this.status==="pending"&&(this.status="rejected",e(s))}})}}function de(t){let{fallbackElement:i,router:e,future:s}=t,[r,u]=n.useState(e.state),[l,T]=n.useState(),[p,h]=n.useState({isTransitioning:!1}),[o,_]=n.useState(),[m,R]=n.useState(),[w,b]=n.useState(),g=n.useRef(new Map),{v7_startTransition:C}=s||{},y=n.useCallback(a=>{C?re(a):a()},[C]),P=n.useCallback((a,f)=>{let{deletedFetchers:c,flushSync:F,viewTransitionOpts:d}=f;c.forEach(v=>g.current.delete(v)),a.fetchers.forEach((v,z)=>{v.data!==void 0&&g.current.set(z,v.data)});let j=e.window==null||e.window.document==null||typeof e.window.document.startViewTransition!="function";if(!d||j){F?S(()=>u(a)):y(()=>u(a));return}if(F){S(()=>{m&&(o&&o.resolve(),m.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:d.currentLocation,nextLocation:d.nextLocation})});let v=e.window.document.startViewTransition(()=>{S(()=>u(a))});v.finished.finally(()=>{S(()=>{_(void 0),R(void 0),T(void 0),h({isTransitioning:!1})})}),S(()=>R(v));return}m?(o&&o.resolve(),m.skipTransition(),b({state:a,currentLocation:d.currentLocation,nextLocation:d.nextLocation})):(T(a),h({isTransitioning:!0,flushSync:!1,currentLocation:d.currentLocation,nextLocation:d.nextLocation}))},[e.window,m,o,g,y]);n.useLayoutEffect(()=>e.subscribe(P),[e,P]),n.useEffect(()=>{p.isTransitioning&&!p.flushSync&&_(new ie)},[p]),n.useEffect(()=>{if(o&&l&&e.window){let a=l,f=o.promise,c=e.window.document.startViewTransition(async()=>{y(()=>u(a)),await f});c.finished.finally(()=>{_(void 0),R(void 0),T(void 0),h({isTransitioning:!1})}),R(c)}},[y,l,o,e.window]),n.useEffect(()=>{o&&l&&r.location.key===l.location.key&&o.resolve()},[o,m,r.location,l]),n.useEffect(()=>{!p.isTransitioning&&w&&(T(w.state),h({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),b(void 0))},[p.isTransitioning,w]),n.useEffect(()=>{},[]);let x=n.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:a=>e.navigate(a),push:(a,f,c)=>e.navigate(a,{state:f,preventScrollReset:c==null?void 0:c.preventScrollReset}),replace:(a,f,c)=>e.navigate(a,{replace:!0,state:f,preventScrollReset:c==null?void 0:c.preventScrollReset})}),[e]),L=e.basename||"/",U=n.useMemo(()=>({router:e,navigator:x,static:!1,basename:L}),[e,x,L]),M=n.useMemo(()=>({v7_relativeSplatPath:e.future.v7_relativeSplatPath}),[e.future.v7_relativeSplatPath]);return n.useEffect(()=>A(s,e.future),[s,e.future]),n.createElement(n.Fragment,null,n.createElement(B.Provider,{value:U},n.createElement(W.Provider,{value:r},n.createElement(ee.Provider,{value:g.current},n.createElement($.Provider,{value:p},n.createElement(Y,{basename:L,location:r.location,navigationType:r.historyAction,navigator:x,future:M},r.initialized||e.future.v7_partialHydration?n.createElement(se,{routes:e.routes,future:e.future,state:r}):i))))),null)}const se=n.memo(ae);function ae(t){let{routes:i,future:e,state:s}=t;return q(i,void 0,s,e)}var D;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(D||(D={}));var I;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(I||(I={}));export{de as R,fe as c};
